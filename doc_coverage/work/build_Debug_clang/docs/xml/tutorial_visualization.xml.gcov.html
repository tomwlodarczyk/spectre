<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - b1f4fe8326c5dc9de3d64954e9325e08a2677cfd - /work/build_Debug_clang/docs/xml/tutorial_visualization.xml</title>
  <link rel="stylesheet" type="text/css" href="../../../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title"> SpECTRE Documentation Coverage Report</td></tr>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../../../index.html">top level</a> - <a href="index.html">work/build_Debug_clang/docs/xml</a> - tutorial_visualization.xml</td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
             <td class="headerItem">Commit:</td>
             <td class="headerValue"><a target="_blank" href="https://github.com/sxs-collaboration/spectre/commit/b1f4fe8326c5dc9de3d64954e9325e08a2677cfd">b1f4fe8326c5dc9de3d64954e9325e08a2677cfd</a></td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2019-10-20 17:39:50</td>
            <td></td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<span class="lineNum">       1 </span><span class="lineCov">          1 : &lt;?xml version='1.0' encoding='UTF-8' standalone='no'?&gt;</span>
<span class="lineNum">       2 </span>            : &lt;doxygen xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;compound.xsd&quot; version=&quot;1.8.13&quot;&gt;
<span class="lineNum">       3 </span>            :   &lt;compounddef id=&quot;tutorial_visualization&quot; kind=&quot;page&quot;&gt;
<span class="lineNum">       4 </span>            :     &lt;compoundname&gt;tutorial_visualization&lt;/compoundname&gt;
<span class="lineNum">       5 </span>            :     &lt;title&gt;Running and Visualizing&lt;/title&gt;
<span class="lineNum">       6 </span>            :     &lt;detaileddescription&gt;
<span class="lineNum">       7 </span>            : &lt;para&gt;&lt;heading level=&quot;3&quot;&gt;Building an Executable from an Existing Source File&lt;/heading&gt;
<span class="lineNum">       8 </span>            : &lt;/para&gt;&lt;para&gt;SpECTRE source files for evolution executables are located in &lt;computeroutput&gt;src/Evolution/Executables&lt;/computeroutput&gt;. Executables can be compiled by running the command &lt;computeroutput&gt;make EXECUTABLE_NAME&lt;/computeroutput&gt; where &lt;computeroutput&gt;EXECUTABLE_NAME&lt;/computeroutput&gt; is the name of the executable as defined in the &lt;computeroutput&gt;CMakeLists.txt&lt;/computeroutput&gt; file located in the same directory as the source file. For example, to compile the executable that evolves a scalar wave using a three-dimensional domain, one runs the command: &lt;computeroutput&gt;make EvolveScalarWave3D&lt;/computeroutput&gt;, which then results in an executable of the same name in the &lt;computeroutput&gt;bin&lt;/computeroutput&gt; directory of the user&amp;apos;s build directory.&lt;/para&gt;&lt;para&gt;&lt;heading level=&quot;3&quot;&gt;Running an Evolution Executable&lt;/heading&gt;
<span class="lineNum">       9 </span>            : &lt;/para&gt;&lt;para&gt;Each SpECTRE executable reads a user-provided YAML file that specifies the runtime settings of the evolution. This is where options such as the &lt;ref refid=&quot;classDomain&quot; kindref=&quot;compound&quot;&gt;Domain&lt;/ref&gt;, AnalyticSolution, &lt;ref refid=&quot;classTimeStepper&quot; kindref=&quot;compound&quot;&gt;TimeStepper&lt;/ref&gt;, etc are supplied. Example input files are kept in &lt;computeroutput&gt;tests/InputFiles&lt;/computeroutput&gt;, and are written to provide a functional base input file which the user can then modify as desired. Copy the executable and YAML file to a directory of your choice. The YAML file is then passed as an argument to the executable using the flag &lt;computeroutput&gt;--input-file&lt;/computeroutput&gt;. For example, for a scalar wave evolution, run the command: &lt;computeroutput&gt;./EvolveScalarWave3D --input-file Input3DPeriodic.yaml&lt;/computeroutput&gt;. By default, the example input files do not produce any output. This can be changed by modifying the options passed to &lt;computeroutput&gt;&lt;ref refid=&quot;classEventsAndTriggers&quot; kindref=&quot;compound&quot;&gt;EventsAndTriggers&lt;/ref&gt;&lt;/computeroutput&gt;:&lt;/para&gt;&lt;para&gt;&lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;EventsAndTriggers:&lt;/highlight&gt;&lt;/codeline&gt;
<span class="lineNum">      10 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;?&lt;sp/&gt;EveryNSlabs:&lt;/highlight&gt;&lt;/codeline&gt;
<span class="lineNum">      11 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;N:&lt;sp/&gt;3&lt;/highlight&gt;&lt;/codeline&gt;
<span class="lineNum">      12 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;Offset:&lt;sp/&gt;5&lt;/highlight&gt;&lt;/codeline&gt;
<span class="lineNum">      13 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;:&lt;sp/&gt;-&lt;sp/&gt;ObserveErrorNorms&lt;/highlight&gt;&lt;/codeline&gt;
<span class="lineNum">      14 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;?&lt;sp/&gt;SpecifiedSlabs:&lt;/highlight&gt;&lt;/codeline&gt;
<span class="lineNum">      15 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;Slabs:&lt;sp/&gt;[0,&lt;sp/&gt;100]&lt;/highlight&gt;&lt;/codeline&gt;
<span class="lineNum">      16 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;:&lt;sp/&gt;-&lt;sp/&gt;ObserveFields:&lt;/highlight&gt;&lt;/codeline&gt;
<span class="lineNum">      17 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;VariablesToObserve:&lt;sp/&gt;[&amp;quot;Psi&amp;quot;]&lt;/highlight&gt;&lt;/codeline&gt;
<span class="lineNum">      18 </span>            : &lt;/programlisting&gt; This will observe the norms of the errors in the system every three slabs starting with slab five and the volume data of Psi at the start of slabs 0 and 100. A successful observation will result in the creation of H5 files whose names can be specified in the YAML file under the options &lt;computeroutput&gt;VolumeFileName&lt;/computeroutput&gt; and &lt;computeroutput&gt;ReductionFileName&lt;/computeroutput&gt;. One volume data file will be produced from each Charm++ node that is used to run the executable. Each volume data file will have its corresponding node number appended to its file name. Visualization of the volume data will be described in the next section.&lt;/para&gt;&lt;para&gt;&lt;heading level=&quot;3&quot;&gt;3D Data Volume Data In ParaView&lt;/heading&gt;
<span class="lineNum">      19 </span>            : &lt;/para&gt;&lt;para&gt;A SpECTRE executable with observers produces volume and/or reduced data &lt;ref refid=&quot;namespaceh5&quot; kindref=&quot;compound&quot;&gt;h5&lt;/ref&gt; files. An XDMF file must be created from the volume data in order to do visualization using ParaView. To this end we provide the python executable &lt;computeroutput&gt;GenerateXdmf.py&lt;/computeroutput&gt; in the &lt;computeroutput&gt;tools&lt;/computeroutput&gt; directory. &lt;computeroutput&gt;GenerateXdmf.py&lt;/computeroutput&gt; takes two arguments which are passed to &lt;computeroutput&gt;--file-prefix&lt;/computeroutput&gt; and &lt;computeroutput&gt;--output&lt;/computeroutput&gt;. The argument passed to &lt;computeroutput&gt;--file-prefix&lt;/computeroutput&gt; is the name of the H5 volume data, leaving out the node number and extension. The argument passed to &lt;computeroutput&gt;--output&lt;/computeroutput&gt; is the desired .xmf file name, also without filename extension. Use &lt;computeroutput&gt;--help&lt;/computeroutput&gt; to see a further description of possible arguments. Open the .xmf file in ParaView and select the &lt;computeroutput&gt;Xdmf Reader&lt;/computeroutput&gt;, &lt;emphasis&gt;not&lt;/emphasis&gt; the version 3 readers. On the left hand side of the main ParaView window is a section named &lt;computeroutput&gt;Properties&lt;/computeroutput&gt;, here you must click the highlighted &lt;computeroutput&gt;Apply&lt;/computeroutput&gt; button. ParaView will now render your volume data. If you only wish to visualize a few datasets out of a large set, we recommended unchecking the boxes for the datasets you wish to ignore under &lt;computeroutput&gt;Point Arrays&lt;/computeroutput&gt; before clicking &lt;computeroutput&gt;Apply&lt;/computeroutput&gt;.&lt;/para&gt;&lt;para&gt;&lt;heading level=&quot;3&quot;&gt;Helpful ParaView Filters&lt;/heading&gt;
<span class="lineNum">      20 </span>            : &lt;/para&gt;&lt;para&gt;Here we describe the usage of filters we&amp;apos;ve found to better visualize our data. Feel free to contribute to this section!&lt;/para&gt;&lt;para&gt;&lt;heading level=&quot;4&quot;&gt;Removing &lt;ref refid=&quot;classMesh&quot; kindref=&quot;compound&quot;&gt;Mesh&lt;/ref&gt; Imprinting&lt;/heading&gt;
<span class="lineNum">      21 </span>            : &lt;/para&gt;&lt;para&gt;You may notice what appears to be mesh imprinting on the data. The imprinting effect can be removed by applying the &lt;computeroutput&gt;Tetrahedralize&lt;/computeroutput&gt; filter. To apply the filter select the &lt;computeroutput&gt;Filters&lt;/computeroutput&gt; menu item, then &lt;computeroutput&gt;Alphabetical&lt;/computeroutput&gt; and finally &lt;computeroutput&gt;Tetrahedralize&lt;/computeroutput&gt;.&lt;/para&gt;&lt;para&gt;&lt;heading level=&quot;4&quot;&gt;Creating Derived Volume Data&lt;/heading&gt;
<span class="lineNum">      22 </span>            : &lt;/para&gt;&lt;para&gt;New volume data can be created from the existing volume data using the &lt;computeroutput&gt;Calculator&lt;/computeroutput&gt; filter. In the &lt;computeroutput&gt;Calculator&lt;/computeroutput&gt;&amp;apos;s text box, input a numerical expression in terms of existing datasets evaluating to the desired quantity. For example, a vector-valued velocity dataset can be created from three scalar velocity component datasets using the expression &lt;computeroutput&gt;velocity_x * iHat + velocity_y * jHat + velocity_z * kHat&lt;/computeroutput&gt; and hitting the &lt;computeroutput&gt;Apply&lt;/computeroutput&gt; button. By default, this will create a new dataset &lt;computeroutput&gt;Result&lt;/computeroutput&gt;. The name of the new dataset can be changed by changing the name provided to &lt;computeroutput&gt;Result Array Name&lt;/computeroutput&gt; above the &lt;computeroutput&gt;Calculator&lt;/computeroutput&gt; text box.&lt;/para&gt;&lt;para&gt;&lt;heading level=&quot;4&quot;&gt;Visualizing Vector Fields Derived From Scalar Fields&lt;/heading&gt;
<span class="lineNum">      23 </span>            : &lt;/para&gt;&lt;para&gt;Use the &lt;computeroutput&gt;Calculator&lt;/computeroutput&gt; filter described above in &amp;quot;Creating Derived Volume Data&amp;quot; to create a new vector-valued dataset. Once this is created, use the &lt;computeroutput&gt;Glyph&lt;/computeroutput&gt; filter and set the &lt;computeroutput&gt;Active Attributes&lt;/computeroutput&gt; to the vector you wish to visualize. Make sure that &lt;computeroutput&gt;Scale Mode&lt;/computeroutput&gt; is set to &lt;computeroutput&gt;vector&lt;/computeroutput&gt;.&lt;/para&gt;&lt;para&gt;&lt;heading level=&quot;3&quot;&gt;Reproducibility of Results&lt;/heading&gt;
<span class="lineNum">      24 </span>            : &lt;/para&gt;&lt;para&gt;Being able to reproduce the results of simulations is important for scientific integrity and accuracy. To this end, SpECTRE encodes the source tree, environment variables, and a record of the third party library versions into the executables. From most executables these can be retrieved using the flags &lt;computeroutput&gt;--dump-source-as filename_without_extension&lt;/computeroutput&gt;, &lt;computeroutput&gt;--dump-paths&lt;/computeroutput&gt;, &lt;computeroutput&gt;--dump-library-version&lt;/computeroutput&gt;, and &lt;computeroutput&gt;--dump-environment&lt;/computeroutput&gt;. The flag &lt;computeroutput&gt;--dump-only&lt;/computeroutput&gt; will cause the program to exit after the information has been dumped. You can use the &lt;computeroutput&gt;--help&lt;/computeroutput&gt; flag to get more details on what flags are available. The flag &lt;computeroutput&gt;--dump-paths&lt;/computeroutput&gt; will print to screen the environment variables &lt;computeroutput&gt;PATH&lt;/computeroutput&gt;, &lt;computeroutput&gt;CPATH&lt;/computeroutput&gt;, &lt;computeroutput&gt;LD_LIBRARY_PATH&lt;/computeroutput&gt;, &lt;computeroutput&gt;LIBRARY_PATH&lt;/computeroutput&gt;, and &lt;computeroutput&gt;CMAKE_PREFIX_PATH&lt;/computeroutput&gt; at link time. The flag &lt;computeroutput&gt;--dump-library-versions&lt;/computeroutput&gt; will print to screen the contents of the &lt;computeroutput&gt;LibraryVersions.txt&lt;/computeroutput&gt; file generated by CMake. The flag &lt;computeroutput&gt;--dump-environment&lt;/computeroutput&gt; will print to screen the output of &lt;computeroutput&gt;printenv&lt;/computeroutput&gt; at link time. Finally, the flag &lt;computeroutput&gt;--dump-source-as filename_without_extension&lt;/computeroutput&gt; will dump the archive &lt;computeroutput&gt;filename_without_extension.tar.gz&lt;/computeroutput&gt;, which contains the entire source tree at link time. The combined above information should be enough to reproduce simulations results to roundoff error as long as the third party libraries used to build the executable have not changed on the system the simulation was run on.&lt;/para&gt;&lt;para&gt;Often only data from the simulation is retained, not the entire executable. In order to make simulations reproducible from only the HDF5 output, any HDF5 files written with SpECTRE&amp;apos;s HDF5 wrappers contain the info about the run, output of &lt;computeroutput&gt;printenv&lt;/computeroutput&gt; at link time, the contents of &lt;computeroutput&gt;LibraryVersions.txt&lt;/computeroutput&gt;, and an archive of the source tree. These are inside the &lt;computeroutput&gt;header.hdr&lt;/computeroutput&gt; group with names &lt;computeroutput&gt;SimulationInfo&lt;/computeroutput&gt;, &lt;computeroutput&gt;EnvironmentVariablesAtCompilation&lt;/computeroutput&gt;, &lt;computeroutput&gt;LibraryVersions&lt;/computeroutput&gt;, and &lt;computeroutput&gt;src.tar.gz&lt;/computeroutput&gt;. The source archive can be extracted by running the command &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;h5dump&lt;sp/&gt;-d&lt;sp/&gt;/src.tar.gz&lt;sp/&gt;-b&lt;sp/&gt;LE&lt;sp/&gt;-o&lt;sp/&gt;src.tar.gz&lt;sp/&gt;/path/to/hdf5/file.h5&lt;/highlight&gt;&lt;/codeline&gt;
<span class="lineNum">      25 </span>            : &lt;/programlisting&gt; You will need to make sure the argument to &lt;computeroutput&gt;-b&lt;/computeroutput&gt; is the same endianness as your computer. In the above example little endian is used. &lt;/para&gt;    &lt;/detaileddescription&gt;
<span class="lineNum">      26 </span>            :   &lt;/compounddef&gt;
<span class="lineNum">      27 </span>            : &lt;/doxygen&gt;
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.13</a></td></tr>
  </table>
  <br>

</body>
</html>
